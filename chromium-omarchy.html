<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Chrome Themes: Building DHH's Vision for Omarchy - Helmut Januschka</title>
  <meta name="description" content="How a single tweet led to a Chromium micro fork and a feature that changes how we think about browser theming">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Dynamic Chrome Themes: Building DHH's Vision for Omarchy",
    "description": "How a single tweet led to a Chromium micro fork and a feature that changes how we think about browser theming",
    "author": {
      "@type": "Person",
      "name": "Helmut Januschka",
      "url": "https://januschka.com",
      "sameAs": [
        "https://github.com/hjanuschka",
        "https://twitter.com/hjanuschka",
        "https://linkedin.com/in/hjanuschka"
      ]
    },
    "publisher": {
      "@type": "Person",
      "name": "Helmut Januschka",
      "url": "https://januschka.com"
    },
    "datePublished": "2024-08-01",
    "dateModified": "2025-09-14",
    "image": "https://januschka.com/og-image.png",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://januschka.com/chromium-omarchy.html"
    },
    "keywords": "Chromium, C++, Chromium, Open Source, Browser Development",
    "articleSection": "Technology",
    "inLanguage": "en-US",
    "potentialAction": {
      "@type": "ReadAction",
      "target": "https://januschka.com/chromium-omarchy.html"
    }
  }
  </script>
  
  <!-- Open Graph -->
  <meta property="og:title" content="Dynamic Chrome Themes: Building DHH's Vision for Omarchy">
  <meta property="og:description" content="How a single tweet led to a Chromium micro fork and a feature that changes how we think about browser theming">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://januschka.com/chromium-omarchy.html">
  <meta property="og:site_name" content="Helmut Januschka">
  <meta property="article:author" content="Helmut Januschka">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@hjanuschka">
  <meta name="twitter:title" content="Dynamic Chrome Themes: Building DHH's Vision for Omarchy">
  <meta name="twitter:description" content="How a single tweet led to a Chromium micro fork and a feature that changes how we think about browser theming">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #0d1117;
      --bg-light: #161b22;
      --bg-lighter: #21262d;
      --text: #ffffff;
      --text-dim: #7d8590;
      --accent: #58a6ff;
      --accent-dim: #1f6feb;
      --border: #30363d;
      --orange: #ff7b72;
    }

    /* Light mode */
    [data-theme="light"] {
      --bg: #ffffff;
      --bg-light: #f6f8fa;
      --bg-lighter: #f1f3f4;
      --text: #24292f;
      --text-dim: #656d76;
      --accent: #0969da;
      --accent-dim: #0550ae;
      --border: #d0d7de;
      --orange: #cf222e;
    }

    /* Matrix Theme */
    [data-theme="matrix"] {
      --bg: #0a0a0a;
      --bg-light: #1a1a1a;
      --bg-lighter: #2a2a2a;
      --text: #ffffff;
      --text-dim: #888888;
      --accent: #00ff41;
      --accent-dim: #00aa2b;
      --border: #333333;
      --orange: #ff6b35;
    }

    /* Cyan Terminal Theme */
    [data-theme="cyan"] {
      --bg: #001b1d;
      --bg-light: #003339;
      --bg-lighter: #004a52;
      --text: #ffffff;
      --text-dim: #9ca3af;
      --accent: #00d9ff;
      --accent-dim: #0891b2;
      --border: #374151;
      --orange: #fbbf24;
    }

    /* Purple Synthwave Theme */
    [data-theme="purple"] {
      --bg: #0f0f23;
      --bg-light: #1a1a3a;
      --bg-lighter: #252550;
      --text: #ffffff;
      --text-dim: #a78bfa;
      --accent: #c084fc;
      --accent-dim: #9333ea;
      --border: #4c1d95;
      --orange: #f59e0b;
    }

    /* Amber Terminal Theme */
    [data-theme="amber"] {
      --bg: #1c1611;
      --bg-light: #2d2318;
      --bg-lighter: #3d301f;
      --text: #ffffff;
      --text-dim: #a3a3a3;
      --accent: #fbbf24;
      --accent-dim: #d97706;
      --border: #57534e;
      --orange: #dc2626;
    }

    /* Classic Monochrome Theme */
    [data-theme="mono"] {
      --bg: #000000;
      --bg-light: #1a1a1a;
      --bg-lighter: #2d2d2d;
      --text: #ffffff;
      --text-dim: #9ca3af;
      --accent: #ffffff;
      --accent-dim: #d1d5db;
      --border: #4b5563;
      --orange: #6b7280;
    }

    /* Pink Neon Theme */
    [data-theme="pink"] {
      --bg: #1a0b1a;
      --bg-light: #2d1b2d;
      --bg-lighter: #402b40;
      --text: #ffffff;
      --text-dim: #d1d5db;
      --accent: #ff10f0;
      --accent-dim: #c026d3;
      --border: #7c2d12;
      --orange: #fb923c;
    }

    body {
      font-family: 'JetBrains Mono', monospace;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      font-size: 14px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Navigation */
    .nav {
      background: var(--bg-light);
      border-bottom: 3px solid var(--accent);
      padding: 15px 0;
    }

    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-brand {
      font-weight: bold;
      color: var(--accent);
      font-size: 16px;
    }

    .nav-links {
      display: flex;
      gap: 30px;
    }

    .nav-links a {
      color: var(--text);
      text-decoration: none;
      padding: 8px 16px;
      border: 2px solid transparent;
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .nav-links a:hover {
      border-color: var(--accent);
      background: var(--bg);
    }

    /* Theme Switcher */
    .theme-switcher {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .theme-dropdown {
      position: relative;
    }

    .theme-button {
      background: var(--bg-light);
      border: 2px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      padding: 8px 12px;
      cursor: pointer;
      font-family: inherit;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.3s ease;
    }

    .theme-button:hover {
      border-color: var(--accent);
      background: var(--bg);
    }

    .theme-menu {
      position: absolute;
      top: 100%;
      right: 0;
      background: #1a1a1a;
      border: 2px solid #333333;
      border-radius: 8px;
      margin-top: 5px;
      min-width: 150px;
      z-index: 1000;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }

    .theme-menu.show {
      display: block;
      animation: fadeIn 0.2s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .theme-option {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 16px;
      color: #ffffff;
      text-decoration: none;
      font-size: 12px;
      transition: background 0.2s ease;
      border: none;
      width: 100%;
      text-align: left;
      background: none;
      cursor: pointer;
      font-family: inherit;
    }

    .theme-option:hover {
      background: #2a2a2a;
      color: #ffffff;
    }

    .theme-option:first-child {
      border-radius: 6px 6px 0 0;
    }

    .theme-option:last-child {
      border-radius: 0 0 6px 6px;
    }

    .theme-preview {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 1px solid #666666;
      flex-shrink: 0;
    }

    /* Blog Post Styles */
    .blog-header {
      background: var(--bg-light);
      border-bottom: 3px solid var(--accent);
      padding: 40px 0;
      margin-bottom: 40px;
    }

    .blog-title {
      font-size: 32px;
      color: var(--accent);
      margin-bottom: 15px;
      line-height: 1.2;
    }

    .blog-meta {
      display: flex;
      gap: 20px;
      color: var(--text-dim);
      font-size: 13px;
    }

    .blog-content {
      background: var(--bg-light);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 40px;
      margin-bottom: 40px;
    }

    /* Markdown Content Styles */
    .blog-content h1 {
      color: var(--accent);
      font-size: 28px;
      margin: 30px 0 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--border);
    }

    .blog-content h2 {
      color: var(--orange);
      font-size: 24px;
      margin: 30px 0 15px;
    }

    .blog-content h3 {
      color: var(--accent);
      font-size: 20px;
      margin: 25px 0 15px;
    }

    .blog-content p {
      margin: 15px 0;
      line-height: 1.8;
      color: var(--text);
    }

    .blog-content a {
      color: var(--accent);
      text-decoration: none;
      border-bottom: 1px solid var(--accent);
      transition: all 0.3s ease;
    }

    .blog-content a:hover {
      color: var(--orange);
      border-bottom-color: var(--orange);
    }

    .blog-content ul, .blog-content ol {
      margin: 15px 0;
      padding-left: 30px;
    }

    .blog-content li {
      margin: 8px 0;
      line-height: 1.8;
    }

    .blog-content code {
      background: var(--bg);
      color: var(--accent);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
    }

    .blog-content pre {
      background: #1d1f21 !important;
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 20px !important;
      margin: 20px 0;
      overflow-x: auto;
    }

    .blog-content pre code {
      background: none !important;
      color: #c5c8c6 !important;
      padding: 0;
      text-shadow: none !important;
    }

    /* Override Prism theme colors for better integration */
    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata {
      color: #969896 !important;
    }

    .token.punctuation {
      color: #c5c8c6 !important;
    }

    .token.property,
    .token.tag,
    .token.boolean,
    .token.number,
    .token.constant,
    .token.symbol,
    .token.deleted {
      color: #cc6666 !important;
    }

    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted {
      color: #b5bd68 !important;
    }

    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
      color: #8abeb7 !important;
    }

    .token.atrule,
    .token.attr-value,
    .token.keyword {
      color: #b294bb !important;
    }

    .token.function,
    .token.class-name {
      color: #81a2be !important;
    }

    .token.regex,
    .token.important,
    .token.variable {
      color: #de935f !important;
    }

    .blog-content blockquote {
      border-left: 4px solid var(--accent);
      padding-left: 20px;
      margin: 20px 0;
      color: var(--text-dim);
      font-style: italic;
    }

    .blog-content em {
      color: var(--text-dim);
      font-style: italic;
    }

    .blog-content strong {
      color: var(--accent);
      font-weight: bold;
    }

    /* Status indicator */
    .status {
      display: inline-block;
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      margin-right: 8px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    /* Footer */
    .footer {
      background: var(--bg-light);
      border-top: 3px solid var(--accent);
      padding: 30px 0;
      margin-top: 60px;
      text-align: center;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--text-dim);
    }

    .badge {
      background: var(--bg-lighter);
      color: var(--text);
      padding: 4px 10px;
      border-radius: 12px;
      border: 1px solid var(--border);
      font-size: 11px;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .blog-title {
        font-size: 24px;
      }
      
      .nav-content {
        flex-direction: column;
        gap: 20px;
      }
      
      .nav-content > div {
        flex-direction: column;
        gap: 15px;
      }
      
      .nav-links {
        gap: 15px;
      }
      
      .theme-switcher {
        justify-content: center;
      }
      
      .blog-content {
        padding: 20px;
      }
      
      .footer-content {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav">
    <div class="container">
      <div class="nav-content">
        <div class="nav-brand">
          <span class="status"></span>
          hjanuschka@world
        </div>
        <div style="display: flex; align-items: center; gap: 30px;">
          <div class="nav-links">
            <a href="/">← Back to Home</a>
            <a href="/#projects">Projects</a>
            <a href="/#contact">Contact</a>
          </div>
          <div class="theme-switcher">
            <div class="theme-dropdown">
              <button class="theme-button" id="themeButton">
                <span class="theme-preview" style="background: var(--accent);"></span>
                Themes ▼
              </button>
              <div class="theme-menu" id="themeMenu">
                <button class="theme-option" data-theme="blue">
                  <span class="theme-preview" style="background: #58a6ff;"></span>
                  GitHub Blue
                </button>
                <button class="theme-option" data-theme="light">
                  <span class="theme-preview" style="background: #0969da;"></span>
                  Light Mode
                </button>
                <button class="theme-option" data-theme="matrix">
                  <span class="theme-preview" style="background: #00ff41;"></span>
                  Matrix Green
                </button>
                <button class="theme-option" data-theme="cyan">
                  <span class="theme-preview" style="background: #00d9ff;"></span>
                  Cyan Terminal
                </button>
                <button class="theme-option" data-theme="purple">
                  <span class="theme-preview" style="background: #c084fc;"></span>
                  Purple Synthwave
                </button>
                <button class="theme-option" data-theme="amber">
                  <span class="theme-preview" style="background: #fbbf24;"></span>
                  Amber Terminal
                </button>
                <button class="theme-option" data-theme="mono">
                  <span class="theme-preview" style="background: #ffffff;"></span>
                  Monochrome
                </button>
                <button class="theme-option" data-theme="pink">
                  <span class="theme-preview" style="background: #ff10f0;"></span>
                  Pink Neon
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Blog Header -->
  <div class="blog-header">
    <div class="container">
      <h1 class="blog-title">Dynamic Chrome Themes: Building DHH's Vision for Omarchy</h1>
      <div class="blog-meta">
        <span>⚡ Chromium</span>
        <span>🔧 C++</span>
        <span>👤 Helmut Januschka</span>
      </div>
    </div>
  </div>

  <!-- Blog Content -->
  <article class="container">
    <div class="blog-content">
<p><em>How a single tweet led to a Chromium micro fork and a feature that changes how we think about browser theming</em></p>
<h2>🎉 Update: September 14, 2025 - MERGED &amp; LANDED! A Better Way Through Managed Policies</h2>
<h3>The Golden Nugget Discovery</h3>
<p>Google initially rejected our CLI approach, but working closely with friends at Brave, a crucial insight emerged: <strong>Chrome&#39;s managed policies could set theme colors!</strong> This was a game-changer - policies are an officially supported Chrome feature used by enterprises worldwide.</p>
<p>However, there was a catch: applying policies took 5+ seconds to take effect. This wasn&#39;t the instant response Omarchy users expected.</p>
<h3>Making It Instant</h3>
<p>I dug deeper into Chrome&#39;s policy system and discovered we could add a new flag:</p>
<pre><code class="language-sh"># Instantly refresh and apply platform policies
chromium --refresh-platform-policy
</code></pre>
<p>This flag forces Chrome to immediately reload and apply managed policies without the usual delay. The implications go far beyond just theming - it enables instant policy updates for any managed Chrome setting!</p>
<h3>The Implementation Journey</h3>
<p>After much discussion and collaboration with Chrome&#39;s policy team, we refined the approach. The flag name evolved through several iterations as we better understood the use cases. The final implementation (<a href="https://chromium-review.googlesource.com/c/chromium/src/+/6900896">CL 6900896</a> - <strong>MERGED!</strong>) adds the <code>--refresh-platform-policy</code> flag:</p>
<pre><code class="language-cpp">// chrome/common/chrome_switches.cc
const char kRefreshPlatformPolicy[] = &quot;refresh-platform-policy&quot;;

// chrome/browser/ui/startup/startup_browser_creator.cc
// Trigger immediate policy refresh when Chrome is already running
if (command_line.HasSwitch(switches::kRefreshPlatformPolicy)) {
  g_browser_process-&gt;browser_policy_connector()-&gt;RefreshPlatformPolicies();
  // Return early to prevent opening a new browser window
  return;
}
</code></pre>
<p>The beauty of this implementation is its simplicity - just a few lines of code that unlock powerful functionality!</p>
<h3>Official Chrome Release</h3>
<p>This change has landed and will be released in <strong>Chrome Stable 142</strong>! This means:</p>
<ul>
<li>Official support for instant policy updates</li>
<li>No more waiting for policy refresh intervals</li>
<li>Works with any managed policy, not just themes</li>
</ul>
<h3>Omarchy&#39;s Lightning-Fast Integration</h3>
<p>I quickly assembled <a href="https://github.com/basecamp/omarchy/pull/1251">PR #1251</a> for Omarchy that integrates the new flag with JSON policy updates. Here&#39;s how it works in practice:</p>
<pre><code class="language-sh"># Set theme via managed policy (Linux example)
sudo mkdir -p /etc/chromium/policies/managed
echo &#39;{
  &quot;BrowserThemeColor&quot;: &quot;#ff6b35&quot;
}&#39; | sudo tee /etc/chromium/policies/managed/theme.json

# Instantly apply to running Chrome instances
chromium --refresh-platform-policy --no-startup-window
</code></pre>
<p>For macOS users:</p>
<pre><code class="language-sh"># Create policy directory
sudo mkdir -p /Library/Managed\ Preferences/com.google.Chrome

# Set theme color policy
sudo defaults write /Library/Managed\ Preferences/com.google.Chrome BrowserThemeColor -string &quot;#ff6b35&quot;

# Apply instantly
open -a &quot;Google Chrome&quot; --args --refresh-platform-policy --no-startup-window
</code></pre>
<p>This approach is <strong>even faster than our original CLI implementation</strong> because:</p>
<ol>
<li>Policies are read directly from disk (no IPC overhead)</li>
<li>The refresh flag bypasses all delays</li>
<li>Chrome&#39;s native policy system handles the theme application</li>
<li>Works with existing enterprise policy infrastructure</li>
</ol>
<h3>Brave Ships It Early</h3>
<p>Brave has cherry-picked this change and will ship it even faster with their release based on Chrome 141! This shows the power of open-source collaboration - features can reach users through multiple channels.</p>
<h3>The Bigger Picture</h3>
<p>The <code>--refresh-platform-policy</code> flag opens up new possibilities beyond theming:</p>
<ul>
<li>Instant enterprise policy updates without browser restart</li>
<li>Dynamic security policy adjustments</li>
<li>Real-time configuration changes for managed deployments</li>
<li>Scriptable policy management for power users</li>
</ul>
<p>This is a perfect example of how solving one problem (theme switching) led to a more general solution that benefits the entire Chrome ecosystem.</p>
<hr>
<h2>The Tweet That Started Everything</h2>
<p>It began with <a href="https://x.com/hjanuschka/status/1954552977814855845">a challenge from DHH</a> (David Heinemeier Hansson, creator of Ruby on Rails). He wanted something that seemed simple but revealed an interesting gap: the ability to change Chrome&#39;s theme colors dynamically from the command line.</p>
<p>The context was important - when Chrome uses GTK/Qt themes, this already works automatically. But when using Chrome&#39;s &quot;Classic&quot; theme (which many prefer for consistency across platforms), there was no CLI way to control colors. While you could manually change themes through settings for each instance, Omarchy needed scriptable control - just like it has for other applications.</p>
<p>His vision was clear:</p>
<pre><code class="language-sh"># Change theme when using Chrome&#39;s Classic theme
chrome --set-user-color=&quot;255,0,0&quot;
</code></pre>
<p>This wasn&#39;t just about aesthetics. For DHH&#39;s new <a href="https://omarchy.org">Omarchy Linux distribution</a>, this represented a core philosophy: giving power users complete control over their environment through simple, scriptable interfaces.</p>
<h2>Why This Matters</h2>
<p>The gap in Chrome&#39;s theming:</p>
<ul>
<li><strong>GTK/Qt themes</strong>: Work great, update automatically</li>
<li><strong>Classic theme</strong>: No CLI control, must use GUI per instance</li>
<li><strong>Omarchy&#39;s need</strong>: Scriptable theming like other apps have</li>
</ul>
<p>DHH&#39;s request highlighted this inconsistency. Why shouldn&#39;t the Classic theme be as flexible as GTK/Qt integration?</p>
<h2>The Pleasant Surprise</h2>
<p>The implementation turned out to be easier than expected - the code was already in Chromium! The theme system was robust and well-designed. It just wasn&#39;t exposed via command-line interface.</p>
<p>My task was essentially plumbing: connecting existing functionality to a new entry point.</p>
<h2>The Implementation</h2>
<h3>Finding the Existing Code</h3>
<p>Chrome&#39;s theme system was already sophisticated:</p>
<pre><code class="language-cpp">// Theme colors are defined in the ThemeService
class ThemeService : public KeyedService {
  // Material Design 3 (GM3) color generation
  ui::ColorProviderManager::Key GetColorProviderKey();
  
  // This notifies observers when theme changes
  void NotifyThemeChanged();
};
</code></pre>
<p>The Material Design 3 (GM3) theming logic was all there - it just needed a CLI entry point.</p>
<h3>Adding Command-Line Support</h3>
<p>The implementation added several switches that work together:</p>
<pre><code class="language-cpp">// Core theme switches in chrome_switches.cc
const char kSetDefaultTheme[] = &quot;set-default-theme&quot;;      // Reset to system
const char kSetUserColor[] = &quot;set-user-color&quot;;            // GM3 seed color
const char kSetColorScheme[] = &quot;set-color-scheme&quot;;        // light/dark/system
const char kSetColorVariant[] = &quot;set-color-variant&quot;;      // Material variants
const char kSetGrayscaleTheme[] = &quot;set-grayscale-theme&quot;;  // Grayscale overlay
</code></pre>
<p>These switches can be combined for complete control:</p>
<pre><code class="language-sh"># Dark blue vibrant theme
chrome --set-user-color=&quot;100,150,200&quot; \
       --set-color-scheme=&quot;dark&quot; \
       --set-color-variant=&quot;vibrant&quot;

# Light neutral theme with custom color
chrome --set-user-color=&quot;255,107,53&quot; \
       --set-color-scheme=&quot;light&quot; \
       --set-color-variant=&quot;neutral&quot;

# System theme with grayscale
chrome --set-color-scheme=&quot;system&quot; \
       --set-grayscale-theme=&quot;true&quot;
</code></pre>
<h3>Leveraging Chrome&#39;s Theme System</h3>
<p>The beauty was that Chrome already had:</p>
<ul>
<li>Material Design 3 (GM3) dynamic color generation</li>
<li>ProcessSingleton IPC for notifying running instances</li>
<li>ThemeService infrastructure for applying changes</li>
<li>Support for all Material color variants</li>
</ul>
<p>Combined with <code>--no-startup-window</code>, themes update without opening new windows!</p>
<h2>Plan B: The GTK Theme Generator</h2>
<p>While working on the Chrome patch, I also explored an alternative approach: what if we could generate GTK themes using Chrome&#39;s Material Design 3 logic?</p>
<p>This led to <a href="https://github.com/hjanuschka/material-gtk-generator">material-gtk-generator</a>:</p>
<pre><code class="language-sh"># Generate a GTK theme from Chrome&#39;s GM3 colors
material-gtk-generator --seed-color=&quot;#FF6B6B&quot; --output-dir=~/.themes/
</code></pre>
<p>This was Plan B - if the Chromium CL didn&#39;t land, we could:</p>
<ol>
<li>Generate GTK themes matching Chrome&#39;s GM3 palette</li>
<li>Apply them system-wide</li>
<li>Chrome would pick them up automatically</li>
</ol>
<p>It&#39;s still useful for creating cohesive desktop themes!</p>
<h2>The Micro Fork: Getting It to Users Fast</h2>
<p>DHH didn&#39;t want to wait for Google&#39;s review process. He made a decisive move: <strong>invest in build infrastructure</strong> to ship a micro fork immediately.</p>
<h3>What Happened</h3>
<ol>
<li><strong>DHH&#39;s Decision</strong>: &quot;Let&#39;s ship this NOW to Omarchy users&quot;</li>
<li><strong>Build Infrastructure</strong>: DHH funded dedicated build servers</li>
<li><strong>The Micro Fork</strong>: <a href="https://github.com/omacom-io/omarchy-chromium">Omarchy Chromium</a> was born</li>
<li><strong>Immediate Availability</strong>: Users got the feature within days, not months</li>
</ol>
<p>There&#39;s an excellent <a href="https://www.youtube.com/watch?v=ZEFYTdzYxQM">YouTube video by DHH</a> about the power of open source - showing how we went from idea to fork at incredible speed.</p>
<h3>The Patch</h3>
<p>The entire feature is contained in a <a href="https://chromium-review.googlesource.com/c/chromium/src/+/6832165">single CL (Change List)</a>:</p>
<ul>
<li>Minimal, focused changes</li>
<li>Clean integration with existing code</li>
<li>Easy to maintain and rebase</li>
<li>No invasive modifications</li>
</ul>
<h2>Real-World Usage</h2>
<h3>For Omarchy Users</h3>
<p>Omarchy users just use the built-in theme switcher - it all happens automatically in the background! The system handles the Chrome theming seamlessly alongside other applications.</p>
<h3>For Power Users and Scripters</h3>
<p>The CLI switches enable powerful automation:</p>
<pre><code class="language-sh"># Match browser to terminal theme (Classic theme only)
chromium --set-user-color=&quot;$(get-terminal-color-rgb)&quot;

# Different themes for different workspaces with variants
workspace-1: chromium --set-user-color=&quot;26,26,26&quot; \
                      --set-color-variant=&quot;neutral&quot;
workspace-2: chromium --set-user-color=&quot;0,43,54&quot; \
                      --set-color-variant=&quot;tonal_spot&quot;

# Time-based theming with color schemes
if [[ $(date +%H) -gt 18 ]]; then
  chromium --set-color-scheme=&quot;dark&quot; \
           --set-user-color=&quot;0,0,0&quot;
else
  chromium --set-color-scheme=&quot;light&quot; \
           --set-user-color=&quot;255,255,255&quot;
fi

# Update running instances without opening new window
chromium --no-startup-window \
         --set-user-color=&quot;100,200,150&quot; \
         --set-color-variant=&quot;expressive&quot;
</code></pre>
<p>Note: This works specifically with Chrome&#39;s Classic theme. If you&#39;re using GTK/Qt themes, Chrome already responds to system theme changes automatically.</p>
<h3>Integration with Window Managers</h3>
<p>Window managers can now theme browsers to match the desktop:</p>
<pre><code class="language-python"># Example i3wm integration
import i3ipc
import subprocess

def on_workspace_focus(i3, event):
    workspace = event.current.name
    themes = {
        &quot;1: term&quot;: (&quot;0,0,0&quot;, &quot;dark&quot;, &quot;neutral&quot;),
        &quot;2: web&quot;: (&quot;26,26,46&quot;, &quot;dark&quot;, &quot;tonal_spot&quot;), 
        &quot;3: code&quot;: (&quot;15,52,96&quot;, &quot;dark&quot;, &quot;vibrant&quot;)
    }
    if workspace in themes:
        color, scheme, variant = themes[workspace]
        subprocess.run([
            &quot;chromium&quot;,
            &quot;--no-startup-window&quot;,
            f&quot;--set-user-color={color}&quot;,
            f&quot;--set-color-scheme={scheme}&quot;,
            f&quot;--set-color-variant={variant}&quot;
        ])

i3 = i3ipc.Connection()
i3.on(&quot;workspace::focus&quot;, on_workspace_focus)
i3.main()
</code></pre>
<h2>What&#39;s Next?</h2>
<h3>Upstream Progress</h3>
<p>The <a href="https://chromium-review.googlesource.com/c/chromium/src/+/6832165">Chromium CL</a> is under review. With community support, it might land in mainline Chrome.</p>
<h3>Extended Features</h3>
<p>The complete feature set includes:</p>
<ul>
<li><strong>Material variants</strong>: tonal_spot, neutral, vibrant, expressive</li>
<li><strong>Color schemes</strong>: light, dark, system</li>
<li><strong>Grayscale mode</strong>: For accessibility</li>
<li><strong>No startup window</strong>: Update running instances silently</li>
<li><strong>GM3 color generation</strong>: Full Material Design 3 palette from seed color</li>
</ul>
<h3>Other Browsers</h3>
<p>Brave has shown interest in downstream landing our patch.</p>
<h2>Try It Yourself</h2>
<h3>For Arch/Omarchy Users</h3>
<p>The AUR package is available (replaces the standard Chromium):</p>
<pre><code class="language-sh">yay -S omarchy-chromium-bin

# Teal expressive theme
chromium --set-user-color=&quot;78,205,196&quot; \
         --set-color-variant=&quot;expressive&quot;

# Reset to default
chromium --set-default-theme
</code></pre>
<hr>
<p><em>Sometimes the best features are already there, waiting to be exposed. Thanks to DHH&#39;s vision and investment, Omarchy users don&#39;t have to wait.</em></p>
<p><strong>Links:</strong></p>
<ul>
<li><a href="https://x.com/hjanuschka/status/1954552977814855845">Original Tweet</a></li>
<li><a href="https://chromium-review.googlesource.com/c/chromium/src/+/6832165">Chromium CL</a></li>
<li><a href="https://github.com/omacom-io/omarchy-chromium">Omarchy Chromium Fork</a></li>
<li><a href="https://github.com/hjanuschka/material-gtk-generator">Material GTK Generator (Plan B)</a></li>
<li><a href="https://www.youtube.com/watch?v=ZEFYTdzYxQM">DHH&#39;s Video: Power of OSS - Idea to Fork</a></li>
<li><a href="https://omarchy.org">Omarchy.org</a></li>
<li><a href="https://world.hey.com/dhh/omarchy-micro-forks-chromium-1287486d">DHH&#39;s Blog Post</a></li>
</ul>
    </div>
  </article>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <span>© 2025 Helmut Januschka</span>
        <span class="badge">Powered by marked.js + Terminal Vibes</span>
      </div>
    </div>
  </footer>

  <script>
    // Theme switcher functionality
    const themeButton = document.getElementById('themeButton');
    const themeMenu = document.getElementById('themeMenu');
    const themeOptions = document.querySelectorAll('.theme-option');

    // Toggle theme menu
    themeButton.addEventListener('click', function() {
      themeMenu.classList.toggle('show');
    });

    // Close theme menu when clicking outside
    document.addEventListener('click', function(e) {
      if (!themeButton.contains(e.target) && !themeMenu.contains(e.target)) {
        themeMenu.classList.remove('show');
      }
    });

    // Theme selection
    themeOptions.forEach(option => {
      option.addEventListener('click', function() {
        const theme = this.getAttribute('data-theme');
        
        if (theme === 'blue') {
          document.documentElement.removeAttribute('data-theme');
        } else {
          document.documentElement.setAttribute('data-theme', theme);
        }
        
        // Save theme preference
        localStorage.setItem('theme', theme);
        
        // Close menu
        themeMenu.classList.remove('show');
      });
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme && savedTheme !== 'blue') {
      document.documentElement.setAttribute('data-theme', savedTheme);
    }

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
  
  <!-- Prism.js for syntax highlighting -->
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script>
    // Highlight all code blocks
    Prism.highlightAll();
  </script>
</body>
</html>
